fragment MovieReviewFrag on MovieReview {
  id
  nodeId
  movieId
  title
  body
  rating
  userByUserReviewerId {
    id
    name
  }
}

query MovieAndReviews($nodeId: ID!) {
  movie(nodeId: $nodeId) {
    id
    nodeId
    title
    releaseDate
    imgUrl
    userByUserCreatorId {
      id
      name
    }
    movieDirectorByMovieDirectorId {
      id
      name
    }
    movieReviewsByMovieId(orderBy: RATING_DESC) {
      edges {
        node {
          ...MovieReviewFrag
        }
      }
    }
  }
}

mutation CreateMovieReview($input: CreateMovieReviewInput!) {
  createMovieReview(input: $input) {
    clientMutationId
    movieReview {
      ...MovieReviewFrag
    }
  }
}

mutation UpdateMovieReview($input: UpdateMovieReviewInput!) {
  updateMovieReview(input: $input) {
    clientMutationId
    movieReview {
      ...MovieReviewFrag
    }
  }
}
